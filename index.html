<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reflex Hands Games (Beta)</title>
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/home.css" />
  <link rel="stylesheet" href="css/basic-mode.css" />
  <link rel="stylesheet" href="css/time-attack.css" />
  <link rel="stylesheet" href="css/popups.css" />
  <link rel="stylesheet" href="css/versus-mode.css" />
  <link rel="stylesheet" href="css/profile.css" />
</head>

<body>

  <!-- LOADING SCREEN -->
  <div id="loadingScreen">
    <div class="loading-inner">

      <!-- Hourglass SVG Loader -->
      <svg
        aria-label="loader being flipped clockwise and circled by three white curves fading in and out"
        role="img"
        height="56px"
        width="56px"
        viewBox="0 0 56 56"
        class="loader"
      >
        <clipPath id="sand-mound-top">
          <path d="M 14.613 13.087 C 15.814 12.059 19.3 8.039 20.3 6.539 C 21.5 4.789 21.5 2.039 21.5 2.039 L 3 2.039 C 3 2.039 3 4.789 4.2 6.539 C 5.2 8.039 8.686 12.059 9.887 13.087 C 11 14.039 12.25 14.039 12.25 14.039 C 12.25 14.039 13.5 14.039 14.613 13.087 Z" class="loader__sand-mound-top"></path>
        </clipPath>
        <clipPath id="sand-mound-bottom">
          <path d="M 14.613 20.452 C 15.814 21.48 19.3 25.5 20.3 27 C 21.5 28.75 21.5 31.5 21.5 31.5 L 3 31.5 C 3 31.5 3 28.75 4.2 27 C 5.2 25.5 8.686 21.48 9.887 20.452 C 11 19.5 12.25 19.5 12.25 19.5 C 12.25 19.5 13.5 19.5 14.613 20.452 Z" class="loader__sand-mound-bottom"></path>
        </clipPath>
        <g transform="translate(2,2)">
          <g transform="rotate(-90,26,26)" stroke-linecap="round" stroke-dashoffset="153.94" stroke-dasharray="153.94 153.94" stroke="hsl(0,0%,100%)" fill="none">
            <circle transform="rotate(0,26,26)"   r="24.5" cy="26" cx="26" stroke-width="2.5"  class="loader__motion-thick"></circle>
            <circle transform="rotate(90,26,26)"  r="24.5" cy="26" cx="26" stroke-width="1.75" class="loader__motion-medium"></circle>
            <circle transform="rotate(180,26,26)" r="24.5" cy="26" cx="26" stroke-width="1"    class="loader__motion-thin"></circle>
          </g>
          <g transform="translate(13.75,9.25)" class="loader__model">
            <path d="M 1.5 2 L 23 2 C 23 2 22.5 8.5 19 12 C 16 15.5 13.5 13.5 13.5 16.75 C 13.5 20 16 18 19 21.5 C 22.5 25 23 31.5 23 31.5 L 1.5 31.5 C 1.5 31.5 2 25 5.5 21.5 C 8.5 18 11 20 11 16.75 C 11 13.5 8.5 15.5 5.5 12 C 2 8.5 1.5 2 1.5 2 Z" fill="hsl(var(--hue),90%,85%)"></path>
            <g stroke-linecap="round" stroke="hsl(35,90%,90%)">
              <line y2="20.75" x2="12"    y1="15.75" x1="12"    stroke-dasharray="0.25 33.75" stroke-width="1"   class="loader__sand-grain-left"></line>
              <line y2="21.75" x2="12.5"  y1="16.75" x1="12.5"  stroke-dasharray="0.25 33.75" stroke-width="1"   class="loader__sand-grain-right"></line>
              <line y2="31.5"  x2="12.25" y1="18"    x1="12.25" stroke-dasharray="0.5 107.5"  stroke-width="1"   class="loader__sand-drop"></line>
              <line y2="31.5"  x2="12.25" y1="14.75" x1="12.25" stroke-dasharray="54 54"      stroke-width="1.5" class="loader__sand-fill"></line>
              <line y2="31.5"  x2="12"    y1="16"    x1="12"    stroke-dasharray="1 107"      stroke-width="1"   stroke="hsl(35,90%,83%)" class="loader__sand-line-left"></line>
              <line y2="31.5"  x2="12.5"  y1="16"    x1="12.5"  stroke-dasharray="12 96"      stroke-width="1"   stroke="hsl(35,90%,83%)" class="loader__sand-line-right"></line>
              <g stroke-width="0" fill="hsl(35,90%,90%)">
                <path d="M 12.25 15 L 15.392 13.486 C 21.737 11.168 22.5 2 22.5 2 L 2 2.013 C 2 2.013 2.753 11.046 9.009 13.438 L 12.25 15 Z" clip-path="url(#sand-mound-top)"></path>
                <path d="M 12.25 18.5 L 15.392 20.014 C 21.737 22.332 22.5 31.5 22.5 31.5 L 2 31.487 C 2 31.487 2.753 22.454 9.009 20.062 Z"   clip-path="url(#sand-mound-bottom)"></path>
              </g>
            </g>
            <g stroke-width="2" stroke-linecap="round" opacity="0.7" fill="none">
              <path d="M 19.437 3.421 C 19.437 3.421 19.671 6.454 17.914 8.846 C 16.157 11.238 14.5 11.5 14.5 11.5" stroke="hsl(0,0%,100%)" class="loader__glare-top"></path>
              <path transform="rotate(180,12.25,16.75)" d="M 19.437 3.421 C 19.437 3.421 19.671 6.454 17.914 8.846 C 16.157 11.238 14.5 11.5 14.5 11.5" stroke="hsla(0,0%,100%,0)" class="loader__glare-bottom"></path>
            </g>
            <rect height="2"  width="24.5" fill="hsl(var(--hue),90%,50%)"></rect>
            <rect height="1"  width="19.5" y="0.5"  x="2.5" ry="0.5" rx="0.5" fill="hsl(var(--hue),90%,57.5%)"></rect>
            <rect height="2"  width="24.5" y="31.5" fill="hsl(var(--hue),90%,50%)"></rect>
            <rect height="1"  width="19.5" y="32"   x="2.5" ry="0.5" rx="0.5" fill="hsl(var(--hue),90%,57.5%)"></rect>
          </g>
        </g>
      </svg>

      <div class="loading-title">REFLEX HANDS GAMES</div>
      <div class="loading-subtitle">Memuat aset permainan...</div>
      <div class="loading-bar-wrap">
        <div class="loading-bar-fill" id="loadingBarFill"></div>
      </div>
      <div class="loading-pct" id="loadingPct">0%</div>
    </div>
  </div>

  <!-- FLASH OVERLAY -->
  <div id="flashOverlay"></div>

  <!-- PARTICLE BURST CANVAS -->
  <canvas id="particleCanvas"></canvas>

  <!-- COUNTDOWN OVERLAY 3..2..1..GO! -->
  <div id="countdownOverlay">
    <div id="countdownText" class="countdown-num">3</div>
  </div>

  <!-- AUDIO -->
  <audio id="clickSound" src="assets/audio/click.mp3" preload="auto"></audio>
  <audio id="soundGreen" src="assets/audio/benar.mp3" preload="auto"></audio>
  <audio id="soundRed" src="assets/audio/salah.mp3" preload="auto"></audio>
  <audio id="soundBonus" src="assets/audio/bonus-points.mp3" preload="auto"></audio>
  <audio id="soundFreeze" src="assets/audio/freeze.mp3" preload="auto"></audio>
  <audio id="countdownSound" src="assets/audio/countdown.mp3" preload="auto"></audio>

  <!-- HOME -->
  <div id="home" class="screen active">
    <div class="container">
      <div class="menu">
        <button class="btn play-btn shiny-button" id="homePlayBtn">PLAY</button>
        <button class="btn other-btn shiny-button" id="homeOtherBtn">OTHER GAMES</button>
        <a href="https://lynk.id/bangriyadi/s/z6l332ojeqrg" style="text-decoration: none;"><button class="btn donate-btn shiny-button" id="homeDonateBtn">DONATE</button></a>
      </div>
      <div class="title">
        <h1>REFLEX HANDS GAMES (BETA)</h1>
        <img src="assets/picture/logo.png" alt="Logo" />
      </div>
    </div>
  </div>

  <!-- PROFILE SCREEN -->
  <div id="profileScreen" class="screen"></div>

  <!-- LOBBY -->
  <div id="lobby" class="screen">
    <button class="profile-btn" id="profileBtn">Profile</button>
    <h1>SELECT MODE!</h1>
    <div class="lobby-subtitle">Pilih mode permainan favoritmu</div>
    <div class="mode-container">

      <div class="mode basic-card">
        <div class="mode-img-wrap">
          <span class="mode-icon">üü¢</span>
          <img src="assets/picture/basic-mode.jpg" alt="Basic Mode" />
        </div>
        <div class="mode-body">
          <div class="mode-title">Basic Mode</div>
          <div class="mode-desc">Latih refleksmu ‚Äî klik tombol yang benar sebelum waktu habis.</div>
          <button class="mode-play-btn shiny-button" id="playBasicBtn">‚ñ∂ PLAY</button>
        </div>
      </div>

      <div class="mode time-card">
        <div class="mode-img-wrap">
          <span class="mode-icon">‚è±Ô∏è</span>
          <img src="assets/picture/time-mode.jpg" alt="Time Attack" />
        </div>
        <div class="mode-body">
          <div class="mode-title">Time Attack</div>
          <div class="mode-desc">Raih skor setinggi mungkin sebelum waktu habis.</div>
          <button class="mode-play-btn shiny-button" id="playTimeAttackBtn">‚ñ∂ PLAY</button>
        </div>
      </div>

      <div class="mode versus-card">
        <div class="mode-img-wrap">
          <span class="mode-icon">‚öîÔ∏è</span>
          <img src="assets/picture/versus-mode.jpg" alt="Versus Mode" onerror="this.style.background='#2a1a4a';this.removeAttribute('onerror')" />
        </div>
        <div class="mode-body">
          <div class="mode-title">Versus Mode</div>
          <div class="mode-desc">Adu kecepatan reflek dengan temanmu secara real-time.</div>
          <button class="mode-play-btn shiny-button" id="playVersusBtn">‚ñ∂ PLAY</button>
        </div>
      </div>

    </div>
    <button class="btn back-btn shiny-button" id="lobbyBackBtn">‚Üê Back To Main Menu</button>
  </div>

  <!-- BASIC MODE -->
  <div id="basicGame" class="screen" style="max-width: 500px;">
    <div id="comboContainer">
      <span class="combo-label">COMBO</span>
      <span id="combo">x0</span>
    </div>
    <h1>Basic Mode</h1>
    <p>Skor: <span id="score">0</span></p>
    <div id="gameArea">
      <button id="greenBtn" class="btn game-btn">Klik! <span class="countdown" id="cdGreen"></span></button>
      <button id="redBtn" class="btn game-btn">Jangan Klik! <span class="countdown" id="cdRed"></span></button>
      <button id="bonusBtn" class="btn game-btn">Bonus! <span class="countdown" id="cdBonus"></span></button>
      <button id="holdBtn" class="btn game-btn">Hold <span class="countdown" id="cdHold"></span></button>
    </div>
    <button class="btn back-btn shiny-button" id="exitBasicBtn">Back To Main Menu</button>
  </div>

  <!-- TIME ATTACK -->
  <div id="timeAttackGame" class="screen" style="max-width: 500px;">
    <div id="taComboContainer">
      <span class="combo-label">COMBO</span>
      <span id="taCombo">x0</span>
    </div>
    <h1>Time Attack Mode</h1>
    <p>Skor: <span id="taScore">0</span></p>
    <div id="timerBarWrapper">
      <div id="timerBarFill"></div>
      <span id="timerLabel">0:00</span>
    </div>
    <div id="taGameArea">
      <button id="taGreenBtn" class="btn game-btn">Klik! <span class="countdown" id="taCdGreen"></span></button>
      <button id="taRedBtn" class="btn game-btn">Jangan Klik! <span class="countdown" id="taCdRed"></span></button>
      <button id="taBonusBtn" class="btn game-btn">Bonus! <span class="countdown" id="taCdBonus"></span></button>
      <button id="taHoldBtn" class="btn game-btn">Hold <span class="countdown" id="taCdHold"></span></button>
      <button id="taFreezeBtn" class="btn game-btn freeze-btn shiny-button">
        Freeze! <span id="freezeCooldownLabel"></span>
      </button>
    </div>
    <button class="btn back-btn shiny-button" id="exitTimeAttackBtn">Back To Main Menu</button>
  </div>

  <!-- POPUP: SELECT DIFFICULTY -->
  <div id="difficultyPopup" class="popup-overlay">
    <div class="popup-box diff-popup-box">
      <h2>Select Difficulty</h2>
      <p>Seberapa cepat refleksmu?</p>
      <div class="diff-options">
        <button class="diff-btn diff-normal shiny-button" id="diffNormal">
          <div class="diff-icon">üü¢</div>
          <div class="diff-label">Normal</div>
          <div class="diff-desc">Tempo standar ‚Äî cocok untuk pemula</div>
        </button>
        <button class="diff-btn diff-medium shiny-button" id="diffMedium">
          <div class="diff-icon">üü°</div>
          <div class="diff-label">Medium</div>
          <div class="diff-desc">Tombol bertahan 3 detik ‚Äî lebih cepat!</div>
        </button>
        <button class="diff-btn diff-hard shiny-button" id="diffHard">
          <div class="diff-icon">üî¥</div>
          <div class="diff-label">Hard</div>
          <div class="diff-desc">Tombol bertahan 1.5 detik ‚Äî reflek ekstrem!</div>
        </button>
      </div>
      <button class="btn back-btn shiny-button" id="diffCancelBtn">Batal</button>
    </div>
  </div>

  <!-- POPUP: PILIH DURASI (Time Attack) -->
  <div id="durationPopup" class="popup-overlay">
    <div class="popup-box">
      <h2>Pilih Durasi</h2>
      <p>Berapa lama kamu mau bertahan?</p>
      <div class="duration-options">
        <button class="dur-btn shiny-button" id="dur1">1 Menit</button>
        <button class="dur-btn shiny-button" id="dur3">3 Menit</button>
        <button class="dur-btn shiny-button" id="dur5">5 Menit</button>
        <button class="dur-btn shiny-button" id="dur7">7 Menit</button>
        <button class="dur-btn shiny-button" id="dur10">10 Menit</button>
      </div>
      <button class="btn back-btn shiny-button" id="durCancelBtn">Batal</button>
    </div>
  </div>

  <!-- POPUP: QUIT CONFIRM -->
  <div id="quitConfirmPopup" class="popup-overlay">
    <div class="popup-box">
      <div class="quit-icon">&#9888;&#65039;</div>
      <h2>Akhiri Permainan?</h2>
      <p>Progres kamu akan hilang.<br>Yakin ingin berhenti?</p>
      <div class="quit-buttons">
        <button class="btn quit-yes-btn shiny-button" id="quitYesBtn">Ya, Akhiri</button>
        <button class="btn quit-no-btn shiny-button" id="quitNoBtn">Tidak</button>
      </div>
    </div>
  </div>

  <!-- POPUP: HASIL BASIC MODE -->
  <div id="basicResultPopup" class="popup-overlay">
    <div class="popup-box">
      <h2>Akhir Permainan</h2>
      <p>Skor Akhir kamu:</p>
      <div id="basicFinalScore" class="final-score">0</div>
      <div id="basicFinalCombo" class="final-combo"></div>
      <button class="btn play-btn shiny-button" id="basicPlayAgainBtn">Main Lagi</button>
      <button class="btn back-btn shiny-button" id="basicGoHomeBtn">Kembali ke Menu</button>
    </div>
  </div>

  <!-- POPUP: GAME OVER TIME ATTACK -->
  <div id="gameOverPopup" class="popup-overlay">
    <div class="popup-box">
      <h2>Waktu Habis!</h2>
      <p>Skor Akhir kamu:</p>
      <div id="finalScore" class="final-score">0</div>
      <div id="finalCombo" class="final-combo"></div>
      <button class="btn play-btn shiny-button" id="taPlayAgainBtn">Main Lagi</button>
      <button class="btn back-btn shiny-button" id="taGoHomeBtn">Kembali ke Menu</button>
    </div>
  </div>

  <!-- VERSUS MODE -->
  <div id="versusGame" class="screen">
    <h1>Versus Mode</h1>

    <div id="vsTimerBarWrapper">
      <div id="vsTimerBarFill"></div>
      <span id="vsTimerLabel">0:00</span>
    </div>

    <div class="vs-arena">
      <!-- PLAYER 1 SIDE -->
      <div class="vs-side" id="vsP1Side">
        <div class="vs-player-header">
          <div class="vs-player-name">Player 1</div>
          <div class="vs-score" id="vsP1Score">0</div>
          <div class="vs-key-hint">Tekan [A] untuk klik</div>
          <div class="vs-frozen-label" id="vsFrozenLabel1"></div>
        </div>
        <div class="vs-combo-box" id="vsComboBox1">
          <span class="combo-label">COMBO</span>
          <span id="vsCombo1">x0</span>
        </div>
        <button class="vs-click-btn shiny-button" id="vsP1ClickBtn">KLIK!</button>
      </div>

      <!-- DIVIDER + TOMBOL TENGAH -->
      <div style="position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; min-width:200px;">
        <div class="vs-divider" style="width:4px; height:100%; position:absolute;"></div>
        <div class="vs-game-center">
          <button id="vsGreenBtn" class="btn game-btn">
            Klik!
            <div class="vs-cd-row">
              <span class="vs-countdown" id="vsCd1"></span>
              <span class="vs-countdown" id="vsCd2"></span>
            </div>
          </button>
          <button id="vsRedBtn" class="btn game-btn">
            Jangan Klik!
            <div class="vs-cd-row">
              <span class="vs-countdown"></span>
              <span class="vs-countdown"></span>
            </div>
          </button>
          <button id="vsBonusBtn" class="btn game-btn">
            Bonus x3!
            <div class="vs-cd-row">
              <span class="vs-countdown"></span>
              <span class="vs-countdown"></span>
            </div>
          </button>
          <button id="vsFreezeBtn" class="btn game-btn">
            Freeze!
            <div class="vs-cd-row">
              <span class="vs-countdown"></span>
              <span class="vs-countdown"></span>
            </div>
          </button>
          <button id="vsHoldBtn" class="btn game-btn">
            Hold
            <div class="vs-cd-row">
              <span class="vs-countdown" id="vsCdHold1"></span>
              <span class="vs-countdown" id="vsCdHold2"></span>
            </div>
          </button>
        </div>
      </div>

      <!-- PLAYER 2 SIDE -->
      <div class="vs-side" id="vsP2Side">
        <div class="vs-player-header">
          <div class="vs-player-name">Player 2</div>
          <div class="vs-score" id="vsP2Score">0</div>
          <div class="vs-key-hint">Tekan [L] untuk klik</div>
          <div class="vs-frozen-label" id="vsFrozenLabel2"></div>
        </div>
        <div class="vs-combo-box" id="vsComboBox2">
          <span class="combo-label">COMBO</span>
          <span id="vsCombo2">x0</span>
        </div>
        <button class="vs-click-btn shiny-button" id="vsP2ClickBtn">KLIK!</button>
      </div>
    </div>

    <button class="btn back-btn shiny-button" id="exitVersusBtn">Back To Main Menu</button>
  </div>

  <!-- POPUP: PILIH DURASI VERSUS -->
  <div id="vsDurationPopup" class="popup-overlay">
    <div class="popup-box">
      <h2>Pilih Durasi</h2>
      <p>Berapa lama pertandingan berlangsung?</p>
      <div class="duration-options">
        <button class="dur-btn shiny-button" id="vsDur1">1 Menit</button>
        <button class="dur-btn shiny-button" id="vsDur3">3 Menit</button>
        <button class="dur-btn shiny-button" id="vsDur5">5 Menit</button>
        <button class="dur-btn shiny-button" id="vsDur7">7 Menit</button>
        <button class="dur-btn shiny-button" id="vsDur10">10 Menit</button>
      </div>
      <button class="btn back-btn shiny-button" id="vsDurCancelBtn">Batal</button>
    </div>
  </div>

  <!-- NOTIF TUTORIAL VERSUS -->
  <div id="vsTutorialNotif" class="vs-tutorial-notif">
    <div class="vs-tutorial-icon">&#127918;</div>
    <div class="vs-tutorial-content">
      <div class="vs-tutorial-title">Siap Bertanding!</div>
      <div class="vs-tutorial-msg" id="vsTutorialMsg"></div>
    </div>
  </div>

  <!-- POPUP: HASIL VERSUS -->
  <div id="vsResultPopup" class="popup-overlay">
    <div class="popup-box">
      <h2>Hasil Pertandingan</h2>
      <div class="vs-result-winner" id="vsWinnerText"></div>
      <div class="vs-result-scores" id="vsResultP1"></div>
      <div class="vs-result-scores" id="vsResultP2"></div>
      <button class="btn play-btn shiny-button" id="vsPlayAgainBtn">Main Lagi</button>
      <button class="btn back-btn shiny-button" id="vsGoHomeBtn">Kembali ke Menu</button>
    </div>
  </div>

  <!-- OTHER GAMES OVERLAY (PS Store Style) -->
  <div id="otherGamesOverlay">
    <div class="og-bg" id="ogBg"></div>

    <div class="og-topbar">
      <span class="og-topbar-title">üéÆ Other Games</span>
      <button class="og-close-btn" id="ogCloseBtn">‚úï</button>
    </div>

    <div class="og-main">
      <button class="og-arrow" id="ogPrevBtn">&#8249;</button>
      <div class="og-track-wrap">
        <div class="og-track" id="ogTrack">
          <!-- cards injected by JS -->
        </div>
      </div>
      <button class="og-arrow" id="ogNextBtn">&#8250;</button>
    </div>

    <div class="og-info">
      <div class="og-info-left">
        <div class="og-info-game-title" id="ogInfoTitle"></div>
        <div class="og-info-desc" id="ogInfoDesc"></div>
        <span class="og-info-tag" id="ogInfoTag"></span>
      </div>
      <button class="og-visit-btn" id="ogVisitBtn">üîó Visit Game</button>
    </div>

    <div class="og-dots" id="ogDots"></div>
  </div>

  <footer>¬© 2026 by <strong>Rakha FR</strong> ‚Äî Reflex Hands Games</footer>

  <script src="js/profile.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/basic-mode.js"></script>
  <script src="js/time-attack.js"></script>
  <script src="js/popups.js"></script>
  <script>
    document.getElementById("homePlayBtn").addEventListener("click", () => { playSound(); goToLobby(); });
    document.getElementById("homeDonateBtn").addEventListener("click", () => { playSound(); });
    document.getElementById("profileBtn").addEventListener("click", () => { openProfile(); });
    document.getElementById("lobbyBackBtn").addEventListener("click", () => { playSound(); goToHome(); });
    document.getElementById("taFreezeBtn").addEventListener("click", () => { activateFreeze(); });

    // Difficulty popup
    document.getElementById("diffCancelBtn").addEventListener("click", () => { playSound(); closeDifficultyPopup(); });
    document.getElementById("diffNormal").addEventListener("click", () => { selectDifficulty("normal"); });
    document.getElementById("diffMedium").addEventListener("click", () => { selectDifficulty("medium"); });
    document.getElementById("diffHard").addEventListener("click", () => { selectDifficulty("hard"); });

    // Duration (Time Attack)
    document.getElementById("durCancelBtn").addEventListener("click", () => { playSound(); closeDurationPopup(); });
    document.getElementById("dur1").addEventListener("click", () => { startTimeAttack(1); });
    document.getElementById("dur3").addEventListener("click", () => { startTimeAttack(3); });
    document.getElementById("dur5").addEventListener("click", () => { startTimeAttack(5); });
    document.getElementById("dur7").addEventListener("click", () => { startTimeAttack(7); });
    document.getElementById("dur10").addEventListener("click", () => { startTimeAttack(10); });

    // Duration (Versus)
    document.getElementById("vsDurCancelBtn").addEventListener("click", () => { playSound(); closeVsDurationPopup(); });
    document.getElementById("vsDur1").addEventListener("click", () => { startVersusMode(1); });
    document.getElementById("vsDur3").addEventListener("click", () => { startVersusMode(3); });
    document.getElementById("vsDur5").addEventListener("click", () => { startVersusMode(5); });
    document.getElementById("vsDur7").addEventListener("click", () => { startVersusMode(7); });
    document.getElementById("vsDur10").addEventListener("click", () => { startVersusMode(10); });
  </script>
  <script src="js/versus-mode.js"></script>
  <!-- OTHER GAMES LOGIC -->
  <script>
  (function() {
    // ‚îÄ‚îÄ Game data ‚Äî ganti url/img/title/desc sesuai kebutuhan ‚îÄ‚îÄ
    const OG_GAMES = [
      {
        title: "Plenger RnG",
        desc: "Koleksi semua foto yang ada di game dan pamerkan ke teman mu!",
        tag: "CASUAL ‚Ä¢ SIMULATION",
        img: "assets/picture/OG-GAMES/plengerRNG.jpg",
        url: "https://rakhafr.github.io/PlengerRnG/"
      },
      {
        title: "Geotrade",
        desc: "Buat perusahaan mu dan tingkatkan jaringan antar kota, jangan sampai pasokan habis!",
        tag: "COMING SOON",
        tag: "CASUAL ‚Ä¢ SANDBOX",
        img: "assets/picture/OG-GAMES/geoTrade.png",
        url: "#",
        comingSoon: true
      },
    ];

    let ogCurrent = 0;
    const overlay  = document.getElementById("otherGamesOverlay");
    const ogBg     = document.getElementById("ogBg");
    const ogTrack  = document.getElementById("ogTrack");
    const ogDots   = document.getElementById("ogDots");
    const ogTitle  = document.getElementById("ogInfoTitle");
    const ogDesc   = document.getElementById("ogInfoDesc");
    const ogTag    = document.getElementById("ogInfoTag");
    const ogVisit  = document.getElementById("ogVisitBtn");
    const ogPrev   = document.getElementById("ogPrevBtn");
    const ogNext   = document.getElementById("ogNextBtn");

    // Build cards
    OG_GAMES.forEach((g, i) => {
      const card = document.createElement("div");
      card.className = "og-card" + (i === 0 ? " active-card" : "") + (g.comingSoon ? " og-coming-soon" : "");
      card.dataset.idx = i;
      const csOverlay = g.comingSoon ? `
          <div class="og-cs-overlay">
            <div class="og-cs-badge">
              <span class="og-cs-icon">üîí</span>
              <span class="og-cs-text">COMING SOON</span>
            </div>
          </div>` : "";
      card.innerHTML = `
        <div class="og-card-img-wrap">
          <img src="${g.img}" alt="${g.title}" />
          ${csOverlay}
        </div>
      `;
      card.addEventListener("click", () => goToSlide(i));
      ogTrack.appendChild(card);

      const dot = document.createElement("div");
      dot.className = "og-dot" + (i === 0 ? " active" : "");
      dot.addEventListener("click", () => goToSlide(i));
      ogDots.appendChild(dot);
    });

    function getCardWidth() {
      const c = ogTrack.querySelector(".og-card");
      if (!c) return 400;
      return c.offsetWidth + 20; // width + gap
    }

    function goToSlide(idx) {
      ogCurrent = Math.max(0, Math.min(OG_GAMES.length - 1, idx));
      const g = OG_GAMES[ogCurrent];

      // Update track offset ‚Äî center active card
      const trackWrap = document.querySelector(".og-track-wrap");
      const wrapW = trackWrap.offsetWidth;
      const cw = getCardWidth();
      const offset = ogCurrent * cw - (wrapW / 2) + (cw / 2) - 12;
      ogTrack.style.transform = `translateX(${-offset}px)`;

      // Update card active states
      ogTrack.querySelectorAll(".og-card").forEach((c, i) => {
        c.classList.toggle("active-card", i === ogCurrent);
      });

      // Update dots
      ogDots.querySelectorAll(".og-dot").forEach((d, i) => {
        d.classList.toggle("active", i === ogCurrent);
      });

      // Update info
      ogTitle.textContent = g.title;
      ogDesc.textContent  = g.desc;
      ogTag.textContent   = g.tag;

      // Hide visit button for coming soon games
      if (g.comingSoon) {
        ogVisit.style.display = "none";
      } else {
        ogVisit.style.display = "";
        ogVisit.onclick = () => { if (g.url !== "#") window.open(g.url, "_blank"); };
      }

      // Update bg
      ogBg.style.backgroundImage = `url('${g.img}')`;

      // Update arrows
      ogPrev.disabled = ogCurrent === 0;
      ogNext.disabled = ogCurrent === OG_GAMES.length - 1;
    }

    ogPrev.addEventListener("click", () => { playSound(); goToSlide(ogCurrent - 1); });
    ogNext.addEventListener("click", () => { playSound(); goToSlide(ogCurrent + 1); });

    // Keyboard support
    function onKeyOverlay(e) {
      if (!overlay.classList.contains("active")) return;
      if (e.key === "ArrowLeft")  { playSound(); goToSlide(ogCurrent - 1); }
      if (e.key === "ArrowRight") { playSound(); goToSlide(ogCurrent + 1); }
      if (e.key === "Escape")     closeOtherGames();
    }
    document.addEventListener("keydown", onKeyOverlay);

    // Touch swipe
    let touchStartX = 0;
    overlay.addEventListener("touchstart", e => { touchStartX = e.touches[0].clientX; }, { passive: true });
    overlay.addEventListener("touchend", e => {
      const dx = e.changedTouches[0].clientX - touchStartX;
      if (Math.abs(dx) > 50) { dx < 0 ? goToSlide(ogCurrent + 1) : goToSlide(ogCurrent - 1); }
    });

    // Open / close
    window.openOtherGames = function() {
      overlay.classList.add("active");
      goToSlide(0);
    };
    window.closeOtherGames = function() {
      overlay.classList.remove("active");
    };

    document.getElementById("ogCloseBtn").addEventListener("click", () => { playSound(); closeOtherGames(); });

    // Wire home button
    document.getElementById("homeOtherBtn").addEventListener("click", () => { playSound(); openOtherGames(); });
  })();
  </script>
  <!-- LOADING SCREEN LOGIC -->
  <script>
  (function () {
    const screen  = document.getElementById("loadingScreen");
    const barFill = document.getElementById("loadingBarFill");
    const pctEl   = document.getElementById("loadingPct");
    const subtitleEl = screen.querySelector(".loading-subtitle");

    // ‚îÄ‚îÄ Collect all trackable assets ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const imageUrls = [
      "assets/picture/background.jpg",
      "assets/picture/logo.png",
      "assets/picture/basic-mode.jpg",
      "assets/picture/time-mode.jpg",
      "assets/picture/versus-mode.jpg",
    ];
    const audioIds = [
      "clickSound","soundGreen","soundRed",
      "soundBonus","soundFreeze","countdownSound"
    ];

    const total   = imageUrls.length + audioIds.length;
    let   loaded  = 0;

    function tick(msg) {
      loaded++;
      const pct = Math.min(100, Math.round((loaded / total) * 100));
      barFill.style.width = pct + "%";
      pctEl.textContent   = pct + "%";
      if (msg) subtitleEl.textContent = msg;
      if (loaded >= total) finish();
    }

    function finish() {
      subtitleEl.textContent = "Siap! üéÆ";
      barFill.style.width = "100%";
      pctEl.textContent   = "100%";
      // Short pause so "100%" is visible, then fade out
      setTimeout(() => {
        screen.classList.add("loading-fade-out");
        setTimeout(() => {
          screen.style.display = "none";
        }, 600);
      }, 400);
    }

    // ‚îÄ‚îÄ Track images ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    imageUrls.forEach(url => {
      const img = new Image();
      img.onload  = () => tick("Gambar dimuat‚Ä¶");
      img.onerror = () => tick("Gambar dimuat‚Ä¶");
      img.src = url;
    });

    // ‚îÄ‚îÄ Track audio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    audioIds.forEach(id => {
      const el = document.getElementById(id);
      if (!el) { tick(); return; }
      if (el.readyState >= 4) { tick("Audio dimuat‚Ä¶"); return; }
      el.addEventListener("canplaythrough", () => tick("Audio dimuat‚Ä¶"), { once: true });
      el.addEventListener("error",          () => tick("Audio dimuat‚Ä¶"), { once: true });
      // Fallback: beberapa browser tidak fire canplaythrough
      setTimeout(() => { if (loaded < total) tick("Audio dimuat‚Ä¶"); }, 3000);
    });

    // ‚îÄ‚îÄ Hard fallback ‚Äî max 5 detik ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    setTimeout(() => { if (loaded < total) finish(); }, 5000);
  })();
  </script>
</body>

</html>